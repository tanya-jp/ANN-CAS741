\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\def\code#1{\texttt{#1}}

\begin{document}

\title{Module Interface Specification for ANN (Artificial Neural Network)}

\author{Tanya Djavehrpour}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
\toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
\midrule
March 18 & 1.0 & Initial Draft\\
% Date 2 & 1.1 & Notes\\
\bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation \cite{SRS} at \href{https://github.com/tanya-jp/ANN-CAS741/blob/main/docs/SRS/SRS.pdf}{HERE}.
% \wss{Also add any additional symbols, abbreviations or acronyms}

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for
ANN (Artificial Neural Network). This document specifies how every module 
is interfacing with every other parts.

Complementary documents include the System Requirement Specifications 
(\href{https://github.com/tanya-jp/ANN-CAS741/blob/main/docs/SRS/SRS.pdf}{SRS}) \cite{SRS}
and Module Guide (\href{https://github.com/tanya-jp/ANN-CAS741/blob/main/docs/Design/SoftArchitecture/MG.pdf}{MG}) \cite{MG}.  
The full documentation and implementation can be
found at \href{https://github.com/tanya-jp/ANN-CAS741/tree/main}{Github repository for ANN}.

\section{Notation}

% \wss{You should describe your notation.  You can use what is below as
%   a starting point.}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by ANN. 

\begin{center}
\renewcommand{\arraystretch}{1.2}
\noindent 
\begin{tabular}{l l p{7.5cm}} 
\toprule 
\textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\ 
\midrule
character & char & a single symbol or digit\\
integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
\bottomrule
\end{tabular} 
\end{center}

\noindent
The specification of \progname \ uses some derived data types: sequences, strings, and
tuples. Sequences are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification.

\section{Module Decomposition}

The following table is taken directly from the Module Guide \cite{MG} document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding} & ~ \\
\midrule

\multirow{7}{0.3\textwidth}{Behaviour-Hiding} &ANN Control Module\\
&Saved ANN Model Module\\
&Output Module\\
&Input Classifier Module\\
&Input Image Module\\
&Training Model Module\\
% &Feedback Module\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision} &Input Preparing and Preprocessing Module\\
&Data Preparing and Preprocessing Module\\
&Training Module\\
&Testing Module\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage
~\newpage

\section{MIS of ANN Control Module} \label{ACM} 
% \wss{Use labels for
%   cross-referencing}

% \wss{You can reference SRS labels, such as R\ref{R_Inputs}.}

% \wss{It is also possible to use \LaTeX for hypperlinks to external documents.}

\subsection{Module}
\code{main} 

% \wss{Short name for the module}

\subsection{Uses}
\begin{itemize}
  \item Hardware-Hiding Module  
  \item Saved ANN Model Module (\ref{SavedANN})
  \item Output Module (\ref{Output})
\end{itemize}


\subsection{Syntax}

\subsubsection{Exported Constants}
None.

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\code{main} & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
None.
% \wss{Not all modules will have state variables.  State variables give the module
%   a memory.}

\subsubsection{Environment Variables}
None.

% \wss{This section is not necessary for all modules.  Its purpose is to capture
%   when the module has external interaction with the environment, such as for a
%   device driver, screen interface, keyboard, file, etc.}

\subsubsection{Assumptions}
\begin{itemize}
  \item The ANN Control Module assumes that the Hardware-Hiding Module, Saved ANN Model Module, and Output Module are implemented 
  according to their specifications. However, it does include error handling to manage unexpected behaviors or failures in these modules.
  \item The system environment (operating system, hardware) is assumed to be stable. 
  Also, essential libraries and dependencies are presumed to be correctly installed and configured.
\end{itemize}


% \wss{Try to minimize assumptions and anticipate programmer errors via
%   exceptions, but for practical purposes assumptions are sometimes appropriate.}

\subsubsection{Access Routine Semantics}

\noindent main():
\begin{itemize}
  \item transition: Initializes the program.
  % \item output: 
  % \item exception: 
\end{itemize}

Note: As the ANN Control Module mainly serves as a coordinator between different modules 
without maintaining its own state or producing output, its primary function is to ensure 
the correct sequence of operations and interactions between these modules. It relies on 
the robustness of the called modules' error handling.


% \wss{A module without environment variables or state variables is unlikely to
%   have a state transition.  In this case a state transition can only occur if
%   the module is changing the state of another module.}

% \wss{Modules rarely have both a transition and an output.  In most cases you
%   will have one or the other.}

\subsubsection{Local Functions}
None.

% \wss{As appropriate} \wss{These functions are for the purpose of specification.
%   They are not necessarily something that is going to be implemented
%   explicitly.  Even if they are implemented, they are not exported; they only
%   have local scope.}

\section{MIS of Saved ANN Model Module} \label{SavedANN} 

\subsection{Module}
\code{model} 

\subsection{Uses}
\begin{itemize}
  \item Hardware-Hiding Module  
  \item Training Module (\ref{Train})
\end{itemize}


\subsection{Syntax}

\subsubsection{Exported Constants}
None.

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{3.5cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\code{save\_model} & - & \code{boolean} & \code{PermissionError} \\
\code{load\_model} & - & \code{[weights, biases]} & \code{FileNotFoundError} \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item \code{modelData}: structure holding the current ANN model's data. 
This is an array including weights and biases.
\end{itemize}

\subsubsection{Environment Variables}
\code{modelFile}: A file on the file system where the ANN model data is saved and 
from where it is loaded.

\subsubsection{Assumptions}
None.

\subsubsection{Access Routine Semantics}

\noindent \code{save\_model}():
\begin{itemize}
  \item transition: Writes the current state of the ANN model (weights and biases) to the \code{modelFile}.
  \item output: Returns \code{True} if model is saved successfully.
  \item exception: Raises \code{PermissionError} if the module lacks the necessary permissions to write to \code{modelFile}. 
  It may also raise an IOError if there are issues with the file system, such as insufficient storage space.
\end{itemize}

\noindent \code{load\_model}():
\begin{itemize}
  \item transition: Reads the model data from \code{modelFile}. 
  \item output: Returns the trained model based on weights and biases from \code{modelData}.
  \item exception: Raises \code{FileNotFoundError} if \code{modelFile} does not exist or cannot be accessed. 
  Additionally, an exception may be raised for data corruption or format mismatch, indicating issues 
  with the integrity or compatibility of the stored model data.
\end{itemize}


\subsubsection{Local Functions}
None.

\section{MIS of Output Module} \label{Output} 

\subsection{Module}
\code{output} 

\subsection{Uses}
\begin{itemize}
  \item Hardware-Hiding Module  
  \item Input Classifier Module (\ref{In-class})
\end{itemize}


\subsection{Syntax}

\subsubsection{Exported Constants}
None.

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2.5cm} p{4cm} p{4cm} p{3cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\code{set\_class} & - & - & - \\
\code{set\_feedback} & \code{String} & \code{boolean} &  \code{PermissionError}\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
None.

\subsubsection{Environment Variables}
None.

\subsubsection{Assumptions}
None.

\subsubsection{Access Routine Semantics}

\noindent \code{get\_class}():
\begin{itemize}
  \item transition: Receives the classification result from the Input Classifier Module (\ref{In-class}).
  \item output: None.
  \item exception: None.
\end{itemize}

\noindent \code{set\_feedback}():
\begin{itemize}
  \item transition: Sets user feedback on classification result. 
  \item output: Returns a confirmation message or status after recording the feedback.
  \item exception: Raises \code{PermissionError} if the module lacks the necessary permissions to record feedback.
\end{itemize}


\subsubsection{Local Functions}
None.

\section{MIS of Input Classifier Module} \label{In-class} 

\subsection{Module}
\code{classifier} 

\subsection{Uses}
\begin{itemize}
  \item Hardware-Hiding Module  
  \item Saved ANN Module (\ref{SavedANN})
  \item Input Preparing and Preprocessing Module (\ref{In-prep})
\end{itemize}


\subsection{Syntax}

\subsubsection{Exported Constants}
None.

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\code{load\_model} & - & - & - \\
\code{get\_image\_pixels} & - & - & - \\
\code{get\_class} & - & \code{String} &  -\\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item \code{modelData}: structure holding the current ANN model's data. 
  This is an array including weights and biases.
  \item \code{imagePixels}: An array of input image's pixels after preprocessing.
\end{itemize}

\subsubsection{Environment Variables}
None.

\subsubsection{Assumptions}
None.

\subsubsection{Access Routine Semantics}

\noindent \code{load\_model}():
\begin{itemize}
  \item transition: Receives trained model from the Saved ANN Model Module (\ref{SavedANN}) 
  and saves it in \code{modelData}.
  \item output: None.
  \item exception: None.
\end{itemize}

\noindent \code{set\_image\_pixels}():
\begin{itemize}
  \item transition: Receives the array of input image from Input Preparing and Preprocessing Module (\ref{In-prep}) 
  and saves in \code{imagePixels}.
  \item output: None.
  \item exception: None.
\end{itemize}

\noindent \code{get\_class}():
\begin{itemize}
  \item transition: Classifies the input image.
  \item output: The class of the input image.
  \item exception: None.
\end{itemize}

\section{MIS of Input Image Module} \label{In-set} 

\subsection{Module}
\code{input} 

\subsection{Uses}
\begin{itemize}
  \item Hardware-Hiding Module  
\end{itemize}


\subsection{Syntax}

\subsubsection{Exported Constants}
\begin{itemize}
  \item \code{HEIGHT}: A value ($\mathbf{Z}_{+}$) describing acceptable height of input image 
  (currently 32).
  \item \code{WIDTH}: A value ($\mathbf{Z}_{+}$) describing acceptable width of input image
  (currently 32).
  \item \code{IMAGE\_FORMAT}: A list of strings ($str$) of acceptable types of input image 
  (currently PNG and JPEG).
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{3.5cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
\code{set\_input} & \code{inputImagePath} & - & \code{FileNotFoundError, InvalidSize, InvalidFormat} \\
\code{get\_image\_pixels} & - & \code{inputImage} & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
\begin{itemize}
  \item \code{inputImage}: A 3D of the RGB input image.
\end{itemize}

\subsubsection{Environment Variables}
None.

\subsubsection{Assumptions}
None.

\subsubsection{Access Routine Semantics}

\noindent \code{set\_input}(inputImagePath):
\begin{itemize}
  \item transition: Receives the input image from end user and saves its matrix as \code{inputImage}.
  \item output: None.
  \item exception: Raises \code{FileNotFoundError} if \code{inputImagePath} does not exist or cannot be accessed. 
  Also, \code{InvalidSize} is raised when the size of input image in not compatible with \code{HEIGHT} or 
  \code{WIDTH}. Additionally, \code{InvalidFormat} is thrown if the input image's format is 
  not compatible with \code{IMAGE\_FORMAT}.
\end{itemize}

\noindent \code{get\_image\_pixels}():
\begin{itemize}
  \item transition: Getter of the input image's matrix.
  \item output: 3D matrix of \code{inputImage}.
  \item exception: None.
\end{itemize}


\subsubsection{Local Functions}
None.



\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{Appendix} \label{Appendix}

\wss{Extra information if required}

\section{Reflection}

The information in this section will be used to evaluate the team members on the
graduate attribute of Problem Analysis and Design.  Please answer the following questions:

\begin{enumerate}
  \item What are the limitations of your solution?  Put another way, given
  unlimited resources, what could you do to make the project better? (LO\_ProbSolutions)
  \item Give a brief overview of other design solutions you considered.  What
  are the benefits and tradeoffs of those other designs compared with the chosen
  design?  From all the potential options, why did you select the documented design?
  (LO\_Explores)
\end{enumerate}


\end{document}